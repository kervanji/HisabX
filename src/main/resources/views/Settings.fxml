<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<TabPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
         fx:controller="com.hisabx.controller.SettingsController"
         tabClosingPolicy="UNAVAILABLE" prefWidth="700" prefHeight="550"
         style="-fx-background-color: #f8fafc;">
    
    <Tab text="النسخ الاحتياطي">
        <VBox spacing="15" style="-fx-background-color: #f8fafc;">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            
            <Label text="النسخ الاحتياطي واستعادة البيانات" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #1f3c56;"/>
            
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8;">
                <Label text="إنشاء نسخة احتياطية" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                <Label text="سيتم حفظ نسخة من قاعدة البيانات في المجلد المحدد" style="-fx-text-fill: #6b7280;"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <TextField fx:id="backupPathField" prefWidth="400" promptText="مسار حفظ النسخة الاحتياطية"/>
                    <Button text="تصفح..." onAction="#handleBrowseBackupPath"
                            style="-fx-background-color: #6b7280; -fx-text-fill: white;"/>
                </HBox>
                <Button text="إنشاء نسخة احتياطية الآن" onAction="#handleCreateBackup"
                        style="-fx-background-color: #10b981; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20;"/>
            </VBox>
            
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8;">
                <Label text="استعادة من نسخة احتياطية" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                <Label text="⚠️ تحذير: سيتم استبدال البيانات الحالية بالبيانات من النسخة الاحتياطية" 
                       style="-fx-text-fill: #ef4444; -fx-font-weight: bold;"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <TextField fx:id="restorePathField" prefWidth="400" promptText="مسار ملف النسخة الاحتياطية"/>
                    <Button text="تصفح..." onAction="#handleBrowseRestorePath"
                            style="-fx-background-color: #6b7280; -fx-text-fill: white;"/>
                </HBox>
                <Button text="استعادة البيانات" onAction="#handleRestoreBackup"
                        style="-fx-background-color: #f59e0b; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20;"/>
            </VBox>
            
            <Label fx:id="backupStatusLabel" text="" style="-fx-font-size: 12px;"/>
        </VBox>
    </Tab>
    
    <Tab text="إعدادات الإيصالات">
        <VBox spacing="15" style="-fx-background-color: #f8fafc;">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            
            <Label text="إعدادات الإيصالات والفواتير" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #1f3c56;"/>
            
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8;">
                <Label text="اسم الشركة / المخزن" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                <Label text="سيظهر تحت اسم البرنامج HisabX في الصفحة الرئيسية" style="-fx-text-fill: #6b7280;"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <TextField fx:id="companyNameField" prefWidth="400" promptText="مثال: مخزن النور للتجارة"/>
                    <Button text="حفظ" onAction="#handleSaveCompanyName"
                            style="-fx-background-color: #3b82f6; -fx-text-fill: white;"/>
                </HBox>
            </VBox>
            
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8;">
                <Label text="شعار الإيصال (Banner)" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                <Label text="اختر صورة لتظهر في أعلى الإيصالات (يفضل بعرض 595 بكسل)" style="-fx-text-fill: #6b7280;"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <TextField fx:id="bannerPathField" prefWidth="400" promptText="مسار صورة الشعار"/>
                    <Button text="تصفح..." onAction="#handleBrowseBannerPath"
                            style="-fx-background-color: #6b7280; -fx-text-fill: white;"/>
                </HBox>
                <HBox spacing="10">
                    <Button text="حفظ الشعار" onAction="#handleSaveBanner"
                            style="-fx-background-color: #3b82f6; -fx-text-fill: white;"/>
                    <Button text="إزالة الشعار" onAction="#handleRemoveBanner"
                            style="-fx-background-color: #ef4444; -fx-text-fill: white;"/>
                </HBox>
            </VBox>
            
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8;">
                <Label text="مجلد حفظ الإيصالات" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <TextField fx:id="receiptsPathField" prefWidth="400" text="receipts" promptText="مجلد حفظ الإيصالات"/>
                    <Button text="فتح المجلد" onAction="#handleOpenReceiptsFolder"
                            style="-fx-background-color: #6366f1; -fx-text-fill: white;"/>
                </HBox>
            </VBox>
        </VBox>
    </Tab>
    
    <Tab text="معلومات النظام">
        <VBox spacing="15" style="-fx-background-color: #f8fafc;">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            
            <Label text="معلومات النظام" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #1f3c56;"/>
            
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8;">
                <Label text="إحصائيات قاعدة البيانات" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                <Label fx:id="customersCountLabel" text="عدد العملاء: -"/>
                <Label fx:id="productsCountLabel" text="عدد المنتجات: -"/>
                <Label fx:id="salesCountLabel" text="عدد المبيعات: -"/>
                <Label fx:id="receiptsCountLabel" text="عدد الإيصالات: -"/>
                <Label fx:id="dbSizeLabel" text="حجم قاعدة البيانات: -"/>
                <Button text="تحديث الإحصائيات" onAction="#handleRefreshStats"
                        style="-fx-background-color: #3b82f6; -fx-text-fill: white;"/>
            </VBox>
            
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8;">
                <Label text="معلومات البرنامج" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                <Label text="HisabX v1.0.0"/>
                <Label text="نظام إدارة المخازن والمبيعات"/>
                <Label text="© 2025 HisabX. جميع الحقوق محفوظة."/>
            </VBox>
        </VBox>
    </Tab>
    
    <Tab text="إعدادات متقدمة">
        <VBox spacing="15" style="-fx-background-color: #f8fafc;">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            
            <Label text="إعدادات متقدمة" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #1f3c56;"/>
            
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8;">
                <Label text="إعادة تعيين البيانات" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-text-fill: #ef4444;"/>
                <Label text="⚠️ تحذير: هذا الإجراء سيحذف جميع البيانات نهائياً!" 
                       style="-fx-text-fill: #ef4444;"/>
                <Button text="إعادة تعيين قاعدة البيانات" onAction="#handleResetDatabase"
                        style="-fx-background-color: #ef4444; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20;"/>
            </VBox>
            
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8;">
                <Label text="تصدير البيانات" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                <HBox spacing="10">
                    <Button text="تصدير العملاء إلى CSV" onAction="#handleExportCustomers"
                            style="-fx-background-color: #10b981; -fx-text-fill: white;"/>
                    <Button text="تصدير المنتجات إلى CSV" onAction="#handleExportProducts"
                            style="-fx-background-color: #10b981; -fx-text-fill: white;"/>
                    <Button text="تصدير المبيعات إلى CSV" onAction="#handleExportSales"
                            style="-fx-background-color: #10b981; -fx-text-fill: white;"/>
                </HBox>
            </VBox>
        </VBox>
    </Tab>
</TabPane>
