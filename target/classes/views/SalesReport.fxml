<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>

<VBox xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.hisabx.controller.SalesReportController"
      spacing="15" alignment="TOP_CENTER" prefWidth="950" prefHeight="650"
      style="-fx-background-color: #f5f5f5;">
    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- Header -->
    <HBox alignment="CENTER" spacing="10">
        <Label text="ðŸ“Š ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
    </HBox>

    <!-- Date Range Filter -->
    <HBox spacing="15" alignment="CENTER" style="-fx-background-color: white; -fx-background-radius: 8; -fx-padding: 15;">
        <Label text="Ø§Ù„ÙØªØ±Ø©:" style="-fx-font-weight: bold;"/>
        <ComboBox fx:id="periodComboBox" prefWidth="150" onAction="#handlePeriodChange">
            <items>
                <FXCollections fx:factory="observableArrayList">
                    <String fx:value="Ø§Ù„ÙŠÙˆÙ…"/>
                    <String fx:value="Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹"/>
                    <String fx:value="Ø§Ù„Ø´Ù‡Ø±"/>
                    <String fx:value="Ø§Ù„Ø³Ù†Ø©"/>
                    <String fx:value="Ù…Ø®ØµØµ"/>
                </FXCollections>
            </items>
        </ComboBox>
        
        <Separator orientation="VERTICAL"/>
        
        <Label text="Ù…Ù†:" style="-fx-font-weight: bold;"/>
        <DatePicker fx:id="fromDatePicker" prefWidth="130" onAction="#handleDateChange"/>
        
        <Label text="Ø¥Ù„Ù‰:" style="-fx-font-weight: bold;"/>
        <DatePicker fx:id="toDatePicker" prefWidth="130" onAction="#handleDateChange"/>
        
        <Button text="ðŸ“ˆ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±" onAction="#handleGenerateReport" 
                style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold;"/>
    </HBox>

    <!-- Summary Cards -->
    <HBox spacing="15" alignment="CENTER">
        <VBox alignment="CENTER" spacing="8" prefWidth="180" style="-fx-background-color: #27ae60; -fx-background-radius: 10; -fx-padding: 20;">
            <Label text="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª" style="-fx-text-fill: white; -fx-font-size: 12px;"/>
            <Label fx:id="totalSalesLabel" text="0.00" style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;"/>
            <Label text="Ø¯ÙŠÙ†Ø§Ø±" style="-fx-text-fill: white; -fx-font-size: 12px;"/>
        </VBox>
        <VBox alignment="CENTER" spacing="8" prefWidth="180" style="-fx-background-color: #3498db; -fx-background-radius: 10; -fx-padding: 20;">
            <Label text="Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±" style="-fx-text-fill: white; -fx-font-size: 12px;"/>
            <Label fx:id="invoiceCountLabel" text="0" style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;"/>
            <Label text="ÙØ§ØªÙˆØ±Ø©" style="-fx-text-fill: white; -fx-font-size: 12px;"/>
        </VBox>
        <VBox alignment="CENTER" spacing="8" prefWidth="180" style="-fx-background-color: #9b59b6; -fx-background-radius: 10; -fx-padding: 20;">
            <Label text="Ù…ØªÙˆØ³Ø· Ø§Ù„ÙØ§ØªÙˆØ±Ø©" style="-fx-text-fill: white; -fx-font-size: 12px;"/>
            <Label fx:id="avgSaleLabel" text="0.00" style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;"/>
            <Label text="Ø¯ÙŠÙ†Ø§Ø±" style="-fx-text-fill: white; -fx-font-size: 12px;"/>
        </VBox>
        <VBox alignment="CENTER" spacing="8" prefWidth="180" style="-fx-background-color: #e74c3c; -fx-background-radius: 10; -fx-padding: 20;">
            <Label text="Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª" style="-fx-text-fill: white; -fx-font-size: 12px;"/>
            <Label fx:id="totalDiscountLabel" text="0.00" style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;"/>
            <Label text="Ø¯ÙŠÙ†Ø§Ø±" style="-fx-text-fill: white; -fx-font-size: 12px;"/>
        </VBox>
    </HBox>

    <!-- Charts and Tables -->
    <HBox spacing="15" VBox.vgrow="ALWAYS">
        <!-- Payment Methods Breakdown -->
        <VBox spacing="10" prefWidth="300" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 15;">
            <Label text="ØªÙˆØ²ÙŠØ¹ Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <VBox fx:id="paymentBreakdownBox" spacing="10" VBox.vgrow="ALWAYS">
                <!-- Will be populated dynamically -->
            </VBox>
        </VBox>

        <!-- Top Products -->
        <VBox spacing="10" HBox.hgrow="ALWAYS" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 15;">
            <Label text="Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <TableView fx:id="topProductsTable" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="productNameColumn" text="Ø§Ù„Ù…Ù†ØªØ¬" prefWidth="200"/>
                    <TableColumn fx:id="quantitySoldColumn" text="Ø§Ù„ÙƒÙ…ÙŠØ©" prefWidth="80"/>
                    <TableColumn fx:id="productTotalColumn" text="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ" prefWidth="100"/>
                </columns>
                <placeholder>
                    <Label text="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª"/>
                </placeholder>
            </TableView>
        </VBox>

        <!-- Top Customers -->
        <VBox spacing="10" prefWidth="300" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 15;">
            <Label text="Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <TableView fx:id="topCustomersTable" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="customerNameColumn" text="Ø§Ù„Ø¹Ù…ÙŠÙ„" prefWidth="150"/>
                    <TableColumn fx:id="customerTotalColumn" text="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ" prefWidth="100"/>
                </columns>
                <placeholder>
                    <Label text="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª"/>
                </placeholder>
            </TableView>
        </VBox>
    </HBox>

    <!-- Action Buttons -->
    <HBox spacing="10" alignment="CENTER">
        <Button text="ðŸ“„ ØªØµØ¯ÙŠØ± PDF" onAction="#handleExportPDF" prefHeight="35"
                style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold;"/>
        <Button text="ðŸ“¥ ØªØµØ¯ÙŠØ± Excel" onAction="#handleExportExcel" prefHeight="35"
                style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold;"/>
        <Button text="ðŸ–¨ Ø·Ø¨Ø§Ø¹Ø©" onAction="#handlePrint" prefHeight="35"
                style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold;"/>
        <Button text="âŒ Ø¥ØºÙ„Ø§Ù‚" onAction="#handleClose" prefHeight="35"
                style="-fx-background-color: #95a5a6; -fx-text-fill: white;"/>
    </HBox>
</VBox>
