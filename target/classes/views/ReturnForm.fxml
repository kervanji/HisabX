<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.collections.FXCollections?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import java.lang.String?>

<VBox xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.hisabx.controller.ReturnController"
      spacing="15" alignment="TOP_CENTER" prefWidth="900" prefHeight="650"
      style="-fx-background-color: #f5f5f5;">
    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- Header -->
    <HBox alignment="CENTER" spacing="10">
        <Label text="ðŸ”„ Ø¥Ø±Ø¬Ø§Ø¹ Ù…ÙˆØ§Ø¯ Ù…Ø¨Ø§Ø¹Ø©" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #e74c3c;"/>
    </HBox>

    <!-- Sale Selection -->
    <HBox spacing="15" alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-background-radius: 8; -fx-padding: 15;">
        <Label text="Ø§Ù„Ø¹Ù…ÙŠÙ„:" style="-fx-font-weight: bold;"/>
        <ComboBox fx:id="customerComboBox" prefWidth="200" onAction="#handleCustomerChange"/>
        
        <Label text="Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©:" style="-fx-font-weight: bold;"/>
        <ComboBox fx:id="saleComboBox" prefWidth="200" onAction="#handleSaleChange"/>
        
        <Label text="Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:" style="-fx-font-weight: bold;"/>
        <Label fx:id="projectLabel" text="-" style="-fx-text-fill: #3498db;"/>
    </HBox>

    <!-- Sale Items Table - Items that can be returned -->
    <VBox spacing="10" VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-background-radius: 8; -fx-padding: 15;">
        <Label text="Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ù„Ø¥Ø±Ø¬Ø§Ø¹:" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
        <TableView fx:id="saleItemsTable" VBox.vgrow="ALWAYS">
            <columns>
                <TableColumn fx:id="selectColumn" text="âœ“" prefWidth="40"/>
                <TableColumn fx:id="productColumn" text="Ø§Ù„Ù…Ù†ØªØ¬" prefWidth="200"/>
                <TableColumn fx:id="soldQtyColumn" text="Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©" prefWidth="100"/>
                <TableColumn fx:id="returnedQtyColumn" text="Ø§Ù„Ù…Ø±ØªØ¬Ø¹ Ø³Ø§Ø¨Ù‚Ø§Ù‹" prefWidth="100"/>
                <TableColumn fx:id="availableQtyColumn" text="Ø§Ù„Ù…ØªØ§Ø­ Ù„Ù„Ø¥Ø±Ø¬Ø§Ø¹" prefWidth="100"/>
                <TableColumn fx:id="returnQtyColumn" text="ÙƒÙ…ÙŠØ© Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹" prefWidth="100"/>
                <TableColumn fx:id="unitPriceColumn" text="Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©" prefWidth="100"/>
                <TableColumn fx:id="totalColumn" text="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ" prefWidth="100"/>
            </columns>
            <placeholder>
                <Label text="Ø§Ø®ØªØ± ÙØ§ØªÙˆØ±Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¯"/>
            </placeholder>
        </TableView>
    </VBox>

    <!-- Return Details -->
    <HBox spacing="20" style="-fx-background-color: white; -fx-background-radius: 8; -fx-padding: 15;">
        <VBox spacing="10" HBox.hgrow="ALWAYS">
            <Label text="Ù…Ù„Ø§Ø­Ø¸Ø§Øª:" style="-fx-font-weight: bold;"/>
            <TextArea fx:id="notesArea" prefHeight="60" promptText="Ø£Ø¶Ù Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©..."/>
        </VBox>

        <VBox spacing="10" alignment="CENTER_RIGHT" style="-fx-min-width: 250;">
            <HBox spacing="10" alignment="CENTER_RIGHT">
                <Label text="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø±ØªØ¬Ø¹:" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
                <Label fx:id="totalReturnLabel" text="0.00 Ø¯.Ø¹" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #e74c3c;"/>
            </HBox>
        </VBox>
    </HBox>

    <!-- Action Buttons -->
    <HBox spacing="10" alignment="CENTER">
        <Button text="âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹" onAction="#handleConfirmReturn" prefHeight="40" prefWidth="150"
                style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px;"/>
        <Button text="ðŸ“„ Ø·Ø¨Ø§Ø¹Ø© Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹" onAction="#handlePrintReturnReceipt" prefHeight="40"
                style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-font-weight: bold;"/>
        <Button text="ðŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø±ØªØ¬Ø¹Ø§Øª" onAction="#handleViewReturns" prefHeight="40"
                style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold;"/>
        <Button text="âŒ Ø¥ØºÙ„Ø§Ù‚" onAction="#handleClose" prefHeight="40"
                style="-fx-background-color: #95a5a6; -fx-text-fill: white;"/>
    </HBox>
</VBox>
