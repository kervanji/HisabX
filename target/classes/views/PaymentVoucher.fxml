<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.hisabx.controller.PaymentVoucherController"
      spacing="16" style="-fx-background-color: linear-gradient(to bottom, #ffebee, #fce4ec); -fx-padding: 20;">
    
    <!-- Header -->
    <HBox alignment="CENTER" style="-fx-background-color: #c62828; -fx-padding: 16; -fx-background-radius: 12;">
        <Label text="Ø³Ù†Ø¯ Ø¯ÙØ¹" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: white;"/>
    </HBox>
    
    <!-- Main Content -->
    <HBox spacing="20" HBox.hgrow="ALWAYS">
        <!-- Left Panel - Balance Info -->
        <VBox spacing="12" style="-fx-background-color: white; -fx-padding: 16; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 4);"
              prefWidth="220">
            <Label text="Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰" style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #b71c1c;"/>
            
            <HBox spacing="8" alignment="CENTER_RIGHT">
                <Label text="Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø³Ø§Ø¨Ù‚" style="-fx-font-size: 12px; -fx-text-fill: #666;"/>
                <Label fx:id="previousBalanceLabel" text="0" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #c62828; -fx-background-color: #ffebee; -fx-padding: 6 12; -fx-background-radius: 6;"/>
            </HBox>
            
            <HBox spacing="8" alignment="CENTER_RIGHT">
                <Label text="Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ" style="-fx-font-size: 12px; -fx-text-fill: #666;"/>
                <Label fx:id="currentBalanceLabel" text="0" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #1565c0; -fx-background-color: #e3f2fd; -fx-padding: 6 12; -fx-background-radius: 6;"/>
            </HBox>
            
            <Separator/>
            
            <TableView fx:id="balanceTable" prefHeight="120" style="-fx-font-size: 12px;">
                <columns>
                    <TableColumn fx:id="currencyCol" text="Ø§Ù„Ø¹Ù…Ù„Ø©" prefWidth="80"/>
                    <TableColumn fx:id="balanceCol" text="Ø§Ù„Ù…Ø¨Ù„Øº" prefWidth="100"/>
                </columns>
            </TableView>
        </VBox>
        
        <!-- Right Panel - Form -->
        <VBox spacing="14" HBox.hgrow="ALWAYS" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 4);">
            
            <!-- Row 1: Voucher Number & Date -->
            <HBox spacing="20" alignment="CENTER_RIGHT">
                <HBox spacing="8" alignment="CENTER_RIGHT">
                    <TextField fx:id="voucherNumberField" editable="false" prefWidth="120"
                               style="-fx-background-color: #f5f5f5; -fx-padding: 10; -fx-background-radius: 8; -fx-font-size: 14px; -fx-font-weight: bold;"/>
                    <Label text="Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªÙ†Ø¯" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
                </HBox>
                
                <HBox spacing="8" alignment="CENTER_RIGHT" HBox.hgrow="ALWAYS">
                    <DatePicker fx:id="voucherDatePicker" prefWidth="180"
                                style="-fx-background-radius: 8;"/>
                    <Label text="Ø§Ù„ØªØ§Ø±ÙŠØ®" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
                </HBox>
            </HBox>
            
            <!-- Row 2: Currency -->
            <HBox spacing="20" alignment="CENTER_RIGHT">
                <HBox spacing="8" alignment="CENTER_RIGHT">
                    <ComboBox fx:id="currencyCombo" prefWidth="120" style="-fx-background-radius: 8;"/>
                    <Label text="Ø§Ù„Ø¹Ù…Ù„Ø©" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
                </HBox>
            </HBox>
            
            <!-- Row 3: Account Name with Add Button -->
            <HBox spacing="8" alignment="CENTER_RIGHT">
                <Button fx:id="addCustomerBtn" text="+" onAction="#handleAddCustomer"
                        style="-fx-background-color: #43a047; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 8 12; -fx-background-radius: 8; -fx-cursor: hand;">
                    <tooltip>
                        <Tooltip text="Ø¥Ø¶Ø§ÙØ© Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯" />
                    </tooltip>
                </Button>
                <ComboBox fx:id="customerCombo" prefWidth="280" editable="true"
                          promptText="Ø§Ø®ØªØ± Ø£Ùˆ Ø§Ø¨Ø­Ø« Ø¹Ù† Ø­Ø³Ø§Ø¨..."
                          style="-fx-background-radius: 8;"/>
                <Label text="Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
            </HBox>
            
            <!-- Row 4: Cash Account -->
            <HBox spacing="8" alignment="CENTER_RIGHT">
                <ComboBox fx:id="cashAccountCombo" prefWidth="200"
                          style="-fx-background-radius: 8;">
                </ComboBox>
                <Label text="Ø­Ø³Ø§Ø¨ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
            </HBox>
            
            <!-- Row 5: Amount -->
            <HBox spacing="8" alignment="CENTER_RIGHT" style="-fx-background-color: #ffebee; -fx-padding: 12; -fx-background-radius: 8;">
                <Label fx:id="currencyLabel" text="Ø¯ÙŠÙ†Ø§Ø±" style="-fx-font-size: 14px; -fx-text-fill: #c62828;"/>
                <TextField fx:id="amountField" prefWidth="200" promptText="0"
                           style="-fx-padding: 12; -fx-background-radius: 8; -fx-font-size: 18px; -fx-font-weight: bold;"/>
                <Label text="Ø§Ù„Ù…Ø¨Ù„Øº" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #b71c1c;"/>
            </HBox>
            
            <!-- Row 6: Discount -->
            <HBox spacing="20" alignment="CENTER_RIGHT">
                <HBox spacing="8" alignment="CENTER_RIGHT">
                    <Label text="%%" style="-fx-font-size: 12px; -fx-text-fill: #666;"/>
                    <TextField fx:id="discountPercentField" prefWidth="80" text="0"
                               style="-fx-padding: 8; -fx-background-radius: 8;"/>
                </HBox>
                <Label text="Ø§Ù„Ø®ØµÙ… Ø§Ù„Ù…Ù…Ù†ÙˆØ­" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
            </HBox>
            
            <!-- Row 7: Description -->
            <HBox spacing="8" alignment="CENTER_RIGHT">
                <TextArea fx:id="descriptionArea" prefHeight="60" prefWidth="400"
                          promptText="Ø§Ù„Ø¨ÙŠØ§Ù† / Ø§Ù„ÙˆØµÙ"
                          style="-fx-background-radius: 8;"/>
                <Label text="Ø§Ù„Ø¨ÙŠØ§Ù†" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
            </HBox>
            
            <!-- Installment Section -->
            <VBox spacing="10" style="-fx-background-color: #fff3e0; -fx-padding: 12; -fx-background-radius: 8;">
                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <CheckBox fx:id="isInstallmentCheck" text="Ø¯ÙØ¹ Ø¹Ù„Ù‰ Ø£Ù‚Ø³Ø§Ø·" onAction="#handleInstallmentToggle"
                              style="-fx-font-size: 13px; -fx-font-weight: bold;"/>
                    <Label text="Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¯ÙØ¹" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #e65100;"/>
                </HBox>
                
                <HBox fx:id="installmentOptionsBox" spacing="20" alignment="CENTER_RIGHT" visible="false" managed="false">
                    <HBox spacing="8" alignment="CENTER_RIGHT">
                        <TextField fx:id="installmentCountField" prefWidth="80" promptText="Ø¹Ø¯Ø¯"
                                   style="-fx-padding: 8; -fx-background-radius: 8;"/>
                        <Label text="Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ø·:" style="-fx-font-size: 13px;"/>
                    </HBox>
                    <HBox spacing="8" alignment="CENTER_RIGHT">
                        <Label fx:id="installmentAmountLabel" text="0" style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #e65100;"/>
                        <Label text="Ù‚ÙŠÙ…Ø© Ø§Ù„Ù‚Ø³Ø·:" style="-fx-font-size: 13px;"/>
                    </HBox>
                </HBox>
            </VBox>
            
            <!-- Customer Items Section - Materials purchased from this customer -->
            <VBox spacing="10" style="-fx-background-color: #f5f5f5; -fx-padding: 12; -fx-background-radius: 8;">
                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Button fx:id="loadItemsBtn" text="ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯" onAction="#handleLoadCustomerItems"
                            style="-fx-background-color: #1976d2; -fx-text-fill: white; -fx-font-size: 12px; -fx-padding: 8 16; -fx-background-radius: 6; -fx-cursor: hand;"/>
                    <Label text="Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø´ØªØ±Ø§Ø© Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #b71c1c;"/>
                </HBox>
                
                <TableView fx:id="customerItemsTable" prefHeight="120" style="-fx-font-size: 12px;">
                    <columns>
                        <TableColumn fx:id="ciDateCol" text="Ø§Ù„ØªØ§Ø±ÙŠØ®" prefWidth="100"/>
                        <TableColumn fx:id="ciProductCol" text="Ø§Ù„Ù…Ø§Ø¯Ø©" prefWidth="150"/>
                        <TableColumn fx:id="ciQuantityCol" text="Ø§Ù„ÙƒÙ…ÙŠØ©" prefWidth="80"/>
                        <TableColumn fx:id="ciTotalCol" text="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ" prefWidth="100"/>
                        <TableColumn fx:id="ciCurrencyCol" text="Ø§Ù„Ø¹Ù…Ù„Ø©" prefWidth="70"/>
                    </columns>
                </TableView>
                
                <HBox spacing="20" alignment="CENTER_RIGHT">
                    <HBox spacing="8">
                        <Label fx:id="totalUsdLabel" text="0" style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #1565c0;"/>
                        <Label text="Ø¯ÙˆÙ„Ø§Ø±:" style="-fx-font-size: 13px;"/>
                    </HBox>
                    <HBox spacing="8">
                        <Label fx:id="totalIqdLabel" text="0" style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #2e7d32;"/>
                        <Label text="Ø¯ÙŠÙ†Ø§Ø±:" style="-fx-font-size: 13px;"/>
                    </HBox>
                    <Label text="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ§Ø¯:" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
                </HBox>
            </VBox>
            
        </VBox>
    </HBox>
    
    <!-- Previous Vouchers Button -->
    <HBox alignment="CENTER_RIGHT">
        <Button fx:id="previousVouchersBtn" text="Ø§Ù„Ø³Ù†Ø¯Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©" onAction="#handlePreviousVouchers"
                style="-fx-background-color: #1565c0; -fx-text-fill: white; -fx-font-size: 13px; -fx-padding: 10 20; -fx-background-radius: 8; -fx-cursor: hand;"/>
    </HBox>
    
    <!-- Action Buttons -->
    <HBox alignment="CENTER" spacing="16" style="-fx-padding: 10;">
        <Button fx:id="newBtn" text="âž• Ø¬Ø¯ÙŠØ¯" onAction="#handleNew"
                style="-fx-background-color: #43a047; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 24; -fx-background-radius: 8; -fx-cursor: hand;"/>
        <Button fx:id="saveBtn" text="ðŸ’¾ Ø­ÙØ¸" onAction="#handleSave"
                style="-fx-background-color: #1976d2; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 24; -fx-background-radius: 8; -fx-cursor: hand;"/>
        <Button fx:id="printBtn" text="ðŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©" onAction="#handlePrint"
                style="-fx-background-color: #7b1fa2; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 24; -fx-background-radius: 8; -fx-cursor: hand;"/>
        <Button text="Ø¥Ù„ØºØ§Ø¡" onAction="#handleCancel"
                style="-fx-background-color: #e0e0e0; -fx-text-fill: #333; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 24; -fx-background-radius: 8; -fx-cursor: hand;"/>
    </HBox>
</VBox>
